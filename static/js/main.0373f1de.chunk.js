(this["webpackJsonplibrary-app"]=this["webpackJsonplibrary-app"]||[]).push([[0],{13:function(e,t,r){e.exports={wrap:"BookList_wrap__1LGE6",loadWrap:"BookList_loadWrap__2R5nf",count:"BookList_count__2J4h0",bookList:"BookList_bookList__245dp",btn:"BookList_btn__1T6ea"}},15:function(e,t,r){e.exports={default:"Input_default__21bcX",errorInput:"Input_errorInput__2veyf",error:"Input_error__i0LCq"}},16:function(e,t,r){e.exports={wrap:"BookCard_wrap__cIVVU",book:"BookCard_book__1wv7P",img:"BookCard_img__3ZBTN",description:"BookCard_description__CPFad"}},20:function(e,t,r){e.exports={default:"Button_default__3A_gB",error:"Button_error__3a1c0"}},24:function(e,t,r){e.exports={default:"Select_default__2PWyE"}},27:function(e,t,r){e.exports={book:"Book_book__G1VRf",description:"Book_description__1kddn"}},36:function(e,t,r){e.exports={container:"App_container__1pgGd"}},40:function(e,t,r){e.exports={ldsDualRing:"Preloader_ldsDualRing__1fj7a"}},46:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(19),s=r.n(c),o=(r(46),r(36)),i=r.n(o),u=r(3),l=r(11),j=r(15),d=r.n(j),b=r.p+"static/media/search.66b79e13.svg",p=r(1),m=n.a.memo((function(e){e.type;var t=e.onChange,r=e.onChangeText,a=e.onKeyPress,n=e.onEnter,c=e.error,s=e.className,o=e.spanClassName,i=Object(l.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),j="".concat(d.a.error," ").concat(o||""),m=c?"".concat(d.a.errorInput,"  ").concat(d.a.default," ").concat(s||""):"".concat(d.a.default," ").concat(s||"");return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",Object(u.a)({type:"text",onChange:function(e){t&&t(e),r&&r(e.currentTarget.value)},onKeyPress:function(e){a&&a(e),n&&"Enter"===e.key&&n()},className:m,style:{backgroundImage:"url(".concat(b,")")}},i)),c&&Object(p.jsx)("div",{className:j,children:c})]})})),O=r(8),h=r.n(O),f=r(20),x=r.n(f),_=n.a.memo((function(e){var t=e.error,r=e.className,a=Object(l.a)(e,["error","className"]),n="".concat(t?x.a.error+" "+x.a.default:x.a.default," ").concat(r);return Object(p.jsx)("button",Object(u.a)({className:n},a))})),g=r(24),v=r.n(g),T=n.a.memo((function(e){var t=e.options,r=e.name,a=e.className,n=e.onChange,c=e.onChangeOption,s=Object(l.a)(e,["options","name","className","onChange","onChangeOption"]),o=t?t.map((function(e,t){return Object(p.jsx)("option",{className:v.a.option,value:e,children:e},t+""+e)})):[],i="".concat(v.a.default," ").concat(a);return Object(p.jsx)("select",Object(u.a)(Object(u.a)({name:r,className:i,onChange:function(e){c&&c(e.currentTarget.value),n&&n(e)}},s),{},{children:o}))})),k=r(25),y=r.n(k),S=r(37),E=r(21),N=function(e,t){t(q(e.message?e.message:"Some error occurred")),t(G("failed"))},P=r(38),B=r.n(P).a.create({baseURL:"https://www.googleapis.com/books/v1/"}),R=function(e,t,r,a){return B.get("volumes?q=".concat(e,"+").concat(t,"&orderBy=").concat(r,"&maxResults=30&startIndex=").concat(a,"&").concat("key=AIzaSyB-JHixor0WrTyBQX64mEutuCjbJoTaopY"))},A={totalResult:0,startIndex:30},I=function(e){return{type:"PAGE/SET-TOTAL-ITEMS",totalResult:e}},C=function(e,t){var r={};return e.filter((function(e){var a=e[t];return!r[a]&&(r[a]=!0,!0)}))},w={status:"idle",books:[],error:null,currentBook:[],queryTerm:{}},L=function(e){return{type:"APP/SET-BOOKS",books:e}},F=function(e){return{type:"APP/SET-NEW-BOOKS",books:e}},G=function(e){return{type:"APP/SET-STATUS",status:e}},q=function(e){return{type:"APP/SET-ERROR",error:e}},K=function(e){return{type:"APP/SET-QUERY-TERM",term:e}},U=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(){var n=Object(S.a)(y.a.mark((function n(c,s){var o,i,u,l;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=s().app.queryTerm.search,i=s().app.queryTerm.categories,u=s().app.queryTerm.sortBy,c(G("loading")),c(K({search:e,categories:t,sortBy:r})),n.prev=5,n.next=8,R(e,t,r,a);case 8:200===(l=n.sent).status?(c(I(l.data.totalItems)),c(o===e&&i===t&&u===r?L(l.data.items):F(l.data.items)),c(G("succeeded"))):N({message:l.statusText},c),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),N(n.t0,c);case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e,t){return n.apply(this,arguments)}}()},W=r(4),D=r(2),J="/",M="/book-card",H=function(e){return e.app.books},Q=function(e){return e.app.status},V=function(e){return e.app.error},X=function(e){return e.app.queryTerm},Y=function(e){return e.page},z=function(){var e=Object(W.b)(),t=Object(D.f)(),r=Object(W.c)(Q),n=Object(a.useRef)(null);return Object(p.jsxs)("div",{className:h.a.wrap,children:[Object(p.jsx)("div",{className:h.a.bcgImage}),Object(p.jsxs)("form",{ref:n,className:h.a.form,onSubmit:function(r){r.preventDefault();var a=r.currentTarget.elements.search.value,c=r.currentTarget.elements.categories.value,s=r.currentTarget.elements.sortBy.value;(""===a.trim()||a.length>20)&&(alert("Input should be more than 1 character and less then 20"),n.current&&n.current.reset()),e(U(a,c,s)),t(J)},children:[Object(p.jsx)("span",{className:h.a.title,children:" Online library"}),Object(p.jsxs)("div",{className:h.a.inputGroup,children:[Object(p.jsx)(m,{placeholder:"Search",name:"search",className:h.a.input}),Object(p.jsx)(_,{type:"submit",disabled:"loading"===r,className:h.a.btn,children:"search"})]}),Object(p.jsxs)("div",{className:h.a.selectGroup,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:"Categories"}),Object(p.jsx)(T,{options:["all","art","biography","computers","history","medical","poetry"],name:"categories"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:"Sorting by"}),Object(p.jsx)(T,{options:["relevance","newest"],name:"sortBy"})]})]})]})]})},Z=r(13),$=r.n(Z),ee=r(40),te=r.n(ee),re=n.a.memo((function(){return Object(p.jsx)("div",{className:te.a.ldsDualRing})})),ae=r(9),ne=r(27),ce=r.n(ne),se=r.p+"static/media/book.41aa1e89.png",oe=n.a.memo((function(e){var t=e.item,r=e.id,a=Object(W.b)(),n=t.imageLinks,c=t.title,s=t.categories,o=t.authors;return Object(p.jsxs)("div",{className:ce.a.book,children:[Object(p.jsx)(ae.b,{onClick:function(){a(function(e){return{type:"APP/SET-CURRENT-BOOK",id:e}}(r))},style:{alignSelf:"center"},to:M,children:Object(p.jsx)("img",{src:n?n.thumbnail:se,alt:""})}),Object(p.jsxs)("div",{className:ce.a.description,children:[Object(p.jsx)("div",{children:s?s[0]:""}),c&&Object(p.jsx)("div",{children:c.length>100?c.slice(0,100)+"...":c}),o&&Object(p.jsxs)("div",{children:[" ",o.join(", ")]})]})]})})),ie=function(){var e=Object(W.b)(),t=Object(W.c)(H),r=Object(W.c)(Q),a=Object(W.c)(V),n=Object(W.c)(Y),c=n.totalResult,s=n.startIndex,o=Object(W.c)(X),i=o.search,u=o.categories,l=o.sortBy;return a&&(alert(a),e(q(""))),Object(p.jsx)("div",{className:$.a.wrap,children:"loading"!==r||t.length?Object(p.jsx)(p.Fragment,{children:c>0&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:$.a.count,children:["Found ",c&&c," results"]}),Object(p.jsx)("div",{className:$.a.bookList,children:t&&t.map((function(e){return Object(p.jsx)(oe,{id:e.id,item:e.volumeInfo},e.id)}))}),c&&Object(p.jsx)(_,{disabled:"loading"===r,className:$.a.btn,onClick:function(){e(U(i,u,l,s)),e({type:"PAGE/SET-START-SEARCH-INDEX",index:30})},children:"Load more"}),"loading"===r&&Object(p.jsx)("div",{className:$.a.loadWrap,children:Object(p.jsx)(re,{})})]})}):Object(p.jsx)("div",{style:{marginTop:"10vh"},children:Object(p.jsx)(re,{})})})},ue=r(16),le=r.n(ue),je=function(e){return e.app.currentBook},de=function(){var e=Object(W.c)(je);return Object(p.jsx)("div",{children:e&&e.map((function(e){var t=e.volumeInfo;return Object(p.jsx)("div",{className:le.a.wrap,children:Object(p.jsxs)("div",{className:le.a.book,children:[Object(p.jsx)("div",{className:le.a.img,children:Object(p.jsx)("img",{src:t.imageLinks?t.imageLinks.thumbnail:se,alt:""})}),Object(p.jsxs)("div",{className:le.a.description,children:[t.categories&&Object(p.jsx)("div",{children:t.categories}),Object(p.jsx)("div",{children:t.title}),Object(p.jsxs)("div",{children:[" ",t.authors.join(", ")]}),t.description&&Object(p.jsxs)("div",{children:[" ",t.description]})]})]})},e.id)}))})};var be=function(){return Object(p.jsxs)("div",{className:i.a.container,children:[Object(p.jsx)(z,{}),Object(p.jsxs)(D.c,{children:[Object(p.jsx)(D.a,{path:"/*",element:Object(p.jsx)(ie,{})}),Object(p.jsx)(D.a,{path:J,element:Object(p.jsx)(ie,{})}),Object(p.jsx)(D.a,{path:M,element:Object(p.jsx)(de,{})})]})]})},pe=r(22),me=r(41),Oe=Object(pe.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-BOOKS":var r=[].concat(Object(E.a)(e.books),Object(E.a)(t.books)),a=C(r,"id");return Object(u.a)(Object(u.a)({},e),{},{books:a});case"APP/SET-NEW-BOOKS":var n=Object(E.a)(t.books),c=C(n,"id");return Object(u.a)(Object(u.a)({},e),{},{books:c});case"APP/SET-STATUS":return Object(u.a)(Object(u.a)({},e),{},{status:t.status});case"APP/SET-QUERY-TERM":return Object(u.a)(Object(u.a)({},e),{},{queryTerm:t.term});case"APP/SET-ERROR":return Object(u.a)(Object(u.a)({},e),{},{error:t.error});case"APP/SET-CURRENT-BOOK":return Object(u.a)(Object(u.a)({},e),{},{currentBook:e.books.filter((function(e){return e.id===t.id}))});default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PAGE/SET-TOTAL-ITEMS":return Object(u.a)(Object(u.a)({},e),{},{totalResult:t.totalResult});case"PAGE/SET-START-SEARCH-INDEX":return Object(u.a)(Object(u.a)({},e),{},{startIndex:e.startIndex+=t.index});default:return e}}}),he=Object(pe.c)(Oe,Object(pe.a)(me.a));window.store=he,s.a.render(Object(p.jsx)(ae.a,{children:Object(p.jsx)(W.a,{store:he,children:Object(p.jsx)(be,{})})}),document.getElementById("root"))},8:function(e,t,r){e.exports={wrap:"SearchForm_wrap__1-Zhq",bcgImage:"SearchForm_bcgImage__2yTIM",form:"SearchForm_form__3S8V5",title:"SearchForm_title__28S27",inputGroup:"SearchForm_inputGroup__wHgTY",input:"SearchForm_input__5EQqv",btn:"SearchForm_btn__vkoJi",selectGroup:"SearchForm_selectGroup__Az_nr"}}},[[73,1,2]]]);
//# sourceMappingURL=main.0373f1de.chunk.js.map